{
  "pluginAlias": "UniFi Protect",
  "pluginType": "platform",
  "headerDisplay": "Full HomeKit support UniFi Protect devices. See the [homebridge-unifi-protect2](https://github.com/hjdhjd/homebridge-unifi-protect2) developer page for detailed documentation.",
  "footerDisplay": "A working **ffmpeg** must be installed on your system for this plugin to work. For audio support, make sure your version of ffmpeg is compiled with support for **fdk-aac**.",
  "singular": true,

  "schema": {
    "type": "object",
    "properties": {
      "debug": {
        "type": "boolean",
        "title": "Debug Logging",
        "required": false,
        "default": false,
        "description": "Enable additional debug logging for this plugin. Default: false."
      },
      "ffmpegOptions": {
        "type": "string",
        "title": "Custom FFmpeg command line options.",
        "required": false,
        "placeholder": "e.g. -probesize 32 -analyzeduration 0 -fflags nobuffer -refs 1 -x264-params intra-refresh=1:bframes=0",
        "description": "Command line options to use for FFmpeg. Default: -probesize 32 -analyzeduration 0 -fflags nobuffer -refs 1 -x264-params intra-refresh=1:bframes=0"
      },
      "motionDuration": {
        "type": "string",
        "title": "Motion Event Duration (seconds)",
        "required": false,
        "minimum": 5,
        "maximum": 20,
        "placeholder": "e.g. 10",
        "description": "Duration of a single motion event. Setting this too low will potentially cause a lot of notification spam. Default: 10."
      },
      "options": {
        "title": "Feature Options",
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "videoProcessor": {
        "type": "string",
        "title": "Video Processor",
        "required": false,
        "placeholder": "e.g. ffmpeg",
        "description": "Location of ffmpeg or your preferred video processor. Default: builtin or in your local path."
      },

      "controllers": {
        "type": "array",
        "title": "UniFi Protect Controllers",
        "items": {
          "type": "object",
          "title": "UniFi Protect Controller",
          "description": "Provide the details of your UniFi Protect controller.",
          "properties": {
            "address": {
              "type": "string",
              "title": "Controller Address",
              "required": true,
              "format": "hostname",
              "placeholder": "e.g. 1.2.3.4",
              "description": "Hostname or IP address of your UniFi Protect controller."
            },
            "name": {
              "type": "string",
              "title": "Controller Name",
              "required": false,
              "placeholder": "e.g. UNVR",
              "description": "Name for this UniFi Protect controller to be used for logging purposes. password. Default: Defined by the controller."
            },
            "password": {
              "type": "string",
              "title": "Controller Password",
              "required": true,
              "placeholder": "e.g. unifi-protect-password",
              "description": "UniFi Protect password for this controller. Creating a homebridge-specific local user is strongly encouraged for security and sanity."
            },
            "refreshInterval": {
              "type": "integer",
              "title": "Controller Refresh Interval (seconds)",
              "required": false,
              "minimum": 2,
              "maximum": 30,
              "placeholder": "10",
              "description": "Refresh interval to check for cameras that have been added or removed to a controller. For UCK Gen2+ devices only, this is also the interval used to check for motion events. Default: 5 seconds for UCK Gen2+, 10 seconds for UniFI OS."
            },
            "username": {
              "type": "string",
              "title": "Controller Username",
              "required": true,
              "placeholder": "e.g. some-unifi-protect-user",
              "description": "UniFi Protect username for this controller. Creating a homebridge-specific local user is strongly encouraged for security and sanity."
            }
          }
        }
      }
    }
  },

  "layout": [
    {
      "key": "controllers",
      "title": "UniFi Protect Controllers",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "buttonText": "Add UniFi Protect Controller",
      "items": [
        "controllers[].address",
        "controllers[].username",
        "controllers[].password",
        "controllers[].refreshInterval",
        "controllers[].name"
      ]
    },

    {
      "key": "general",
      "title": "General Options (Optional)",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "items": [
            "motionDuration",
            "ffmpegOptions",
            "videoProcessor",
            "debug"
          ]
        }
      ]
    },

    {
      "key": "options",
      "title": "Plugin Feature Options (Optional)",
      "buttonText": "Add Feature Option",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "type": "string",
          "description": "Enter only one option per entry. See project page for the complete list of available options.",
          "placeholder": "e.g. Disable.Stream.High",
          "displayFlex": true,
          "flex-direction": "row",
          "items": [
            {
              "key": "options[]"
            }
          ]
        }
      ]
    }
  ]
}
